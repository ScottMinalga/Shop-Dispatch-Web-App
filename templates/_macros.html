{% macro render_table(data, table_type) %}
<script>
  function toggleNestedList(id) {
    var nestedList = document.getElementById(id);
    if (nestedList.style.display === "none") {
      nestedList.style.display = "block";
    } else {
      nestedList.style.display = "none";
    }
  }
  function moveEntry(rowId, entryId) {
    // Handle moving the entry here or redirect to another page to select a destination
  }

  function editEntry(rowId, entryId) {
    // Redirect to the edit page with the entry ID, e.g., /edit/<entryId>
    window.location.href = `/edit/${entryId}`;
  }

  function deleteEntry(rowId, entryId) {
    // Redirect to the delete page with the entry ID, e.g., /delete/<entryId>
    window.location.href = `/delete/${entryId}`;
  }
</script>
<table class="table">
  <thead>
    <tr>
      <th>Project Number</th>
      <th>Job Number</th>
      <th>Sales Order</th>
      <th>Customer Name</th>
      <th>Builder</th>
      <th>Status</th>
      <th>Notes</th>
      <th>Due Date</th>
      <th>Order Date</th>
      <th>Ship Date</th>
      <th>Order Quantity</th>
      <th>Nested List</th>
    </tr>
  </thead>
  <tbody>
    {% for job in data %}
    <tr>
      <td>{{ job.project_number }}</td>
      <td>{{ job.job_number }}</td>
      <td>{{ job.sales_order }}</td>
      <td>{{ job.customer_name }}</td>
      <td>{{ job.builder }}</td>
      <td>{{ job.status }}</td>
      <td>{{ job.notes }}</td>
      <td>{{ job.due_date }}</td>
      <td>{{ job.order_date }}</td>
      <td>{{ job.ship_date }}</td>
      <td>{{ job.order_quantity }}</td>
      <td>
        <button onclick="toggleNestedList('{{ table_type }}_{{ loop.index }}')">View Missing Parts</button>
        <ul id="{{ table_type }}_{{ loop.index }}" class="nested-list">
          <li>Example item 1</li>
          <li>Example item 2</li>
          <li>Example item 3</li>
        </ul>
      </td>
    </tr>
    <td>
        <button class="btn btn-primary" onclick="moveEntry('{{ table_type }}_{{ loop.index }}', '{{ job.id }}')">Move</button>
        <button class="btn btn-warning" onclick="editEntry('{{ table_type }}_{{ loop.index }}', '{{ job.id }}')">Edit</button>
        <button class="btn btn-danger" onclick="deleteEntry('{{ table_type }}_{{ loop.index }}', '{{ job.id }}')">Delete</button>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endmacro %}
